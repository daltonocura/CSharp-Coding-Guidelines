<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>C# Guidelines by daltonocura</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>C# Guidelines</h1>
        <p>A set of coding guidelines for C# 3.0, C# 4.0 and C# 5.0, design principles and layout rules for improving the overall quality of your code development.</p>

        <p class="view"><a href="https://github.com/daltonocura/csharpguidelines">View the Project on GitHub <small>daltonocura/csharpguidelines</small></a></p>


        <ul>
          <li><a href="https://github.com/daltonocura/csharpguidelines/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/daltonocura/csharpguidelines/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/daltonocura/csharpguidelines">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="class-design-guidelines" class="anchor" href="#class-design-guidelines" aria-hidden="true"><span class="octicon octicon-link"></span></a>Class Design Guidelines</h1>

<h2>
<a id="a-class-or-interface-should-have-a-single-purpose-" class="anchor" href="#a-class-or-interface-should-have-a-single-purpose-" aria-hidden="true"><span class="octicon octicon-link"></span></a>A class or interface should have a single purpose <img src="imgs/must.png" alt="">
</h2>

<p>A class or interface should have a single purpose within the system it participates in. In general, a class is either representing a primitive type like an email or ISBN number, an abstraction of some business concept, a plain data structure or responsible for orchestrating the interaction between other classes. It is never a combination of those. This rule is widely known as the <a href="http://www.objectmentor.com/resources/articles/srp.pdf">Single Responsibility Principle (SRP)</a>, one of the <a href="http://programmers.stackexchange.com/questions/202571/solid-principles-and-code-structure">SOLID principles</a>.</p>

<p>Using <a href="http://en.wikipedia.org/wiki/Design_pattern_(computer_science)">Design Patterns</a> is to communicate the intent of a class. If a single design pattern is assigned to a class, the class is more likely doing more than one thing.</p>

<h2>
<a id="an-interface-should-be-small-and-focused-" class="anchor" href="#an-interface-should-be-small-and-focused-" aria-hidden="true"><span class="octicon octicon-link"></span></a>An interface should be small and focused <img src="imgs/should.png" alt="">
</h2>

<p>Interfaces should have a name that clearly explains the purpose or role of that interface within the system. Do not combine many vaguely related members on the same interface just because they were all on the same class. Separate the members based on the responsibility of those members so that callers only need to call or implement the interface related to a particular task. This rule is more commonly known as the <a href="http://www.objectmentor.com/resources/articles/isp.pdf">Interface Segregation Principle (ISP)</a>, one of the <a href="http://programmers.stackexchange.com/questions/202571/solid-principles-and-code-structure">SOLID principles</a>.</p>

<h2>
<a id="use-an-interface-rather-than-a-base-class-to-support-multiple-implementations-" class="anchor" href="#use-an-interface-rather-than-a-base-class-to-support-multiple-implementations-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use an interface rather than a base class to support multiple implementations <img src="imgs/may.png" alt="">
</h2>

<p>If you want to expose an extension point from your class, expose it as an interface rather than a base class. You don't want to force users of that extension point to derive their implementations from a base-class that might have undesired behavior. However, for their convenience you may implement an (abstract) default implementation that can serve as a starting point.</p>

<h2>
<a id="use-an-interface-to-decouple-classes-from-each-other-" class="anchor" href="#use-an-interface-to-decouple-classes-from-each-other-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use an interface to decouple classes from each other <img src="imgs/should.png" alt="">
</h2>

<p>Interfaces are a very effective mechanism for decoupling classes from each other because:</p>

<ul>
<li>they can prevent bidirectional associations;</li>
<li>they simplify the replacement of one implementation with another;</li>
<li>They allow replacing an expensive external service or resource with a temporary stub for use in a non-production environment;</li>
<li>they allow replacing the actual implementation with a dummy implementation or a fake object in a unit test; and</li>
<li>using a dependency injection framework you can centralize the choice which class is going to be used whenever a specific interface is requested.</li>
</ul>

<h2>
<a id="avoid-static-classes-" class="anchor" href="#avoid-static-classes-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Avoid static classes <img src="imgs/may.png" alt="">
</h2>

<p>Static classes very often lead to badly designed code, except implementing extension method containers. They are also very difficult to test in isolation unless you're willing to use some very hacky tools.</p>

<p><img src="imgs/note.png" alt="NOTE"> If you really need a static class, mark it as <code>static</code> so that the compiler can prevent the class and its members from instantiating. This relieves you of creating an explicit private constructor.</p>

<h2>
<a id="dont-hide-inherited-members-with-the-new-keyword-" class="anchor" href="#dont-hide-inherited-members-with-the-new-keyword-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Don't hide inherited members with the <code>new</code> keyword <img src="imgs/must.png" alt="">
</h2>

<p>Not only does the new keyword break <a href="http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming">Polymorphism</a>, one of the most essential object-orientation principles, it also makes subclasses more difficult to understand. Consider the following two classes:</p>

<div class="highlight highlight-c#"><pre><span class="pl-s">public</span> <span class="pl-s">class</span> <span class="pl-en">Book</span>
{
    <span class="pl-s">public</span> <span class="pl-s">virtual</span> <span class="pl-st">void</span> <span class="pl-en">Print</span>()
    {
        Console.WriteLine(<span class="pl-s1"><span class="pl-pds">"</span>Printing Book<span class="pl-pds">"</span></span>);
    }
}

<span class="pl-s">public</span> <span class="pl-s">class</span> <span class="pl-en">PocketBook</span> : <span class="pl-st">Book</span>
{
    <span class="pl-s">public</span> <span class="pl-s">new</span> <span class="pl-st">void</span> <span class="pl-en">Print</span>()
    {
        Console.WriteLine(<span class="pl-s1"><span class="pl-pds">"</span>Printing PocketBook<span class="pl-pds">"</span></span>);
    }
}</pre></div>

<p>This will cause behavior that you would not normally expect from class hierarchies:</p>

<div class="highlight highlight-c#"><pre><span class="pl-k">var</span> pocketBook = <span class="pl-s">new</span> PocketBook();

pocketBook.Print();         <span class="pl-c">// Will output "Printing PocketBook "</span>
((Book)pocketBook).Print(); <span class="pl-c">// Will output "Printing Book"</span></pre></div>

<p>It <img src="imgs/must.png" alt="MUST"> <strong>NOT</strong> make a difference whether you call Print through a reference to the base class or through the derived class.</p>

<h2>
<a id="treat-a-derived-object-as-if-it-were-a-base-class-object-" class="anchor" href="#treat-a-derived-object-as-if-it-were-a-base-class-object-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Treat a derived object as if it were a base class object <img src="imgs/should.png" alt="">
</h2>

<p>In other words, you <img src="imgs/should.png" alt="SHOULD"> be able to use a reference to an object of a derived class wherever a reference to its base class object is used without knowing the specific derived class. A very notorious example of a violation of this rule is throwing a <code>NotImplementedException</code> when overriding some of the base-class methods. A less subtle example is not honoring the behavior expected by the base-class. This rule is also known as the <a href="http://www.objectmentor.com/resources/articles/lsp.pdf">Liskov Substitution Principle (LSP)</a>, one of the <a href="http://programmers.stackexchange.com/questions/202571/solid-principles-and-code-structure">SOLID principles</a>.</p>

<h2>
<a id="dont-refer-to-derived-classes-from-the-base-class-" class="anchor" href="#dont-refer-to-derived-classes-from-the-base-class-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Don't refer to derived classes from the base class <img src="imgs/must.png" alt="">
</h2>

<p>Having dependencies from a base class to its sub-classes goes against proper object-oriented design and might prevent other developers from adding new derived classes.</p>

<h2>
<a id="avoid-exposing-the-other-objects-an-object-depends-on" class="anchor" href="#avoid-exposing-the-other-objects-an-object-depends-on" aria-hidden="true"><span class="octicon octicon-link"></span></a>Avoid exposing the other objects an object depends on</h2>

<p>If you find yourself writing code like this then you might be violating the <a href="http://en.wikipedia.org/wiki/Law_of_Demeter">Law of Demeter (LoD)</a>. More detailed explanations of LoD can be found at <a href="http://www.blackwasp.co.uk/LawOfDemeter.aspx">here</a>.</p>

<div class="highlight highlight-c#"><pre>someObject.SomeProperty.GetChild().Foo()</pre></div>

<p>An object should not expose any other classes it depends on because callers may misuse that exposed property or method to access the object behind it. By doing so, you allow calling code to become coupled to the class you are using, and thereby limiting the chance you can easily replace it in a future stage.</p>

<p><img src="imgs/note.png" alt="NOTE"> Using a class designed with the <a href="http://en.wikipedia.org/wiki/Fluent_interface">Fluent Interface</a> pattern like LINQ does seem to violate this rule, but it is simply returning itself so that method chaining is allowed.</p>

<p><img src="imgs/exception.png" alt="EXCEPTION"> Inversion of Control (or Dependency Injection) frameworks such as <a href="http://msdn.microsoft.com/unity">Unity</a>, <a href="http://autofac.org">Autofac</a> or <a href="http://www.ninject.org">Ninject</a> often require you to expose a dependency as a public property. As long as this property is not used for anything else than dependency injection, it wouldn't be considered as a violation.</p>

<h2>
<a id="avoid-bidirectional-dependencies-" class="anchor" href="#avoid-bidirectional-dependencies-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Avoid bidirectional dependencies <img src="imgs/must.png" alt="">
</h2>

<p>This means that two classes know about each other's public members or rely on each other's internal behavior. Refactoring or replacing one of those two classes requires changes on both parties and may involve a lot of unexpected work. The most obvious way of breaking that dependency is introducing an interface for one of the classes and using dependency injection.</p>

<h2>
<a id="classes-should-have-state-and-behavior-" class="anchor" href="#classes-should-have-state-and-behavior-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Classes should have state and behavior <img src="imgs/must.png" alt="">
</h2>

<p>Unless your classes are only to transfer data over communication channels called <a href="http://martinfowler.com/eaaCatalog/dataTransferObject.html">Data Transfer Objects</a>, they <img src="imgs/must.png" alt="MUST"> have logics defining their state and behavior.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/daltonocura">daltonocura</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>